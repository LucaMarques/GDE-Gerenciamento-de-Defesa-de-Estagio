import"./main-DfM3t_-H.js";const y=[{nome:"Administrador",matricula:"0000",email:"brito.mariana@academico.ifpb.edu.br",senha:"1234",tipo:"coordenador"}];document.addEventListener("DOMContentLoaded",()=>{const d=document.getElementById("login-container"),l=()=>d.classList.toggle("move");document.getElementById("open-register").addEventListener("click",l),document.getElementById("open-login").addEventListener("click",l),document.getElementById("open-register-mobile").addEventListener("click",l),document.getElementById("open-login-mobile").addEventListener("click",l);let i=JSON.parse(localStorage.getItem("usuarios"));(!i||i.length===0)&&(i=y),document.getElementById("matricula-cadastro").addEventListener("input",function(){this.value=this.value.replace(/\D/g,"")});const r=document.getElementById("nome-cadastro");r.addEventListener("input",function(){let e=this.value;e=e.replace(/[0-9]/g,""),e=e.replace(/\s{2,}/g," "),this.value=e}),r.addEventListener("blur",function(){let e=this.value.trim();e=e.replace(/\s+/g," "),e=e.replace(/\b\w/g,s=>s.toUpperCase()),this.value=e}),document.getElementById("btn-cadastro").addEventListener("click",()=>{const e=document.getElementById("tipo-usuario").value.trim(),s=document.getElementById("nome-cadastro").value.trim(),n=document.getElementById("matricula-cadastro").value.trim(),o=document.getElementById("email-cadastro").value.trim(),a=document.getElementById("senha-cadastro").value.trim(),t=document.getElementById("msg-cadastro-error");t.style.display="none",t.textContent="";const m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(s===""||n===""||o===""||a===""||e===""){t.textContent="Preencha todos os campos!",t.style.display="block";return}if(!m.test(o)){t.textContent="Digite um email válido!",t.style.display="block";return}if(a.length<6){t.textContent="A senha deve ter 6 caracteres.",t.style.display="block";return}if(!/^\d+$/.test(n)){t.textContent="A matrícula deve ter apenas números!",t.style.display="block";return}if(i.find(g=>g.email===o)){t.textContent="Este email já está cadastrado!",t.style.display="block";return}const u={nome:s,matricula:n,email:o,senha:a,tipo:e,curso:"",cpf:"",sexo:"",nascimento:"",telefone:"",endereco:""};i.push(u),localStorage.setItem("usuarios",JSON.stringify(i)),alert("Cadastro realizado com sucesso!"),document.getElementById("form-cadastro").reset(),l()}),document.getElementById("btn-login").addEventListener("click",()=>{const e=document.getElementById("email-login").value.trim(),s=document.getElementById("senha-login").value.trim(),n=document.getElementById("msg-login-error");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){n.textContent="Digite um e-mail válido.",n.style.display="block";return}if(e===""||s===""){n.textContent="Preencha todos os campos.",n.style.display="block";return}const a=i.find(t=>t.email===e&&t.senha===s);a?(localStorage.setItem("usuarioLogado",JSON.stringify(a)),localStorage.setItem("tipoUsuario",a.tipo),alert(`Bem-vindo, ${a.nome} ! (${a.tipo})`),window.location.href="dashboard.html"):(n.textContent="Email ou senha incorretos.",n.style.display="block")});function c(e,s){const n=document.getElementById(e),o=document.getElementById(s);o.addEventListener("click",()=>{n.type==="password"?(n.type="text",o.classList.remove("bi-eye-slash"),o.classList.add("bi-eye")):(n.type="password",o.classList.remove("bi-eye"),o.classList.add("bi-eye-slash"))})}c("senha-login","toggle-login-senha"),c("senha-cadastro","toggle-cadastro-senha")});

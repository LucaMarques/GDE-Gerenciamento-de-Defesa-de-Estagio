import{m as g,e as s}from"./main-DbTm04-e.js";import{u as d}from"./usuarios-CQ51lQxe.js";document.addEventListener("DOMContentLoaded",()=>{g();const i=document.getElementById("orientador"),c=document.getElementById("form-solicitar-defesa"),l=document.getElementById("btn-voltar");d.filter(e=>e.tipo==="orientador").forEach(e=>{const o=document.createElement("option");o.value=e.nome,o.textContent=e.nome,i.appendChild(o)}),l.addEventListener("click",()=>{window.location.href="dashboard.html"}),c.addEventListener("submit",e=>{e.preventDefault();const o=JSON.parse(localStorage.getItem("usuarioLogado"));o||(alert("Você precisa estar logado"),window.location.href="login.html");const a=document.getElementById("tema").value,r=document.getElementById("orientador").value,m={aluno:o.nome,orientador:r,status:"Aguardando",data:"0000-00-00",horario:"00:00",banca:[],local:"",tema:a};let t=JSON.parse(localStorage.getItem("defesas"));Array.isArray(t)||(t=[]),t.push(m),localStorage.setItem("defesas",JSON.stringify(t));const u=`O aluno ${o.nome} solicitou defesa sobre "${a}".`;s(r,u,"alerta"),(JSON.parse(localStorage.getItem("usuarios"))||d).filter(n=>n.tipo==="coordenador").forEach(n=>{const f=`O aluno ${o.nome} solicitou defesa sobre "${a}" com o orientador ${r}.`;s(n.nome,f,"info")}),alert("Solicitação enviada com sucesso!"),window.location.href="defesas.html"})});

import{m as g,d as f,e as u}from"./main-DbTm04-e.js";import{u as S}from"./usuarios-CQ51lQxe.js";document.addEventListener("DOMContentLoaded",()=>{g();const t=JSON.parse(localStorage.getItem("usuarioLogado"));if(!t||t.tipo!=="orientador"){alert("Acesso permitido apenas para orientadores."),window.location.href="login.html";return}const o=document.getElementById("lista-defesas");let s=JSON.parse(localStorage.getItem("defesas"));Array.isArray(s)||(s=[]);const i=[...f,...s].filter(e=>e.orientador===t.nome&&e.status==="Aguardando");if(i.length===0){const e=document.createElement("p");e.textContent="Nenhuma solicitação pendente.",e.style.textAlign="center",e.style.fontSize="18px",o.appendChild(e)}else i.forEach((e,c)=>{const r=document.createElement("div");r.classList.add("card-defesa"),r.innerHTML=`
                <h3 class="card-titulo">${e.tema}</h3>
                <p class="card-info"><strong>Aluno:</strong> ${e.aluno}</p>
                <p class="card-info"><strong>Status:</strong> ${e.status}</p>
            `;const l=document.createElement("div");l.classList.add("card-botoes");const d=document.createElement("button");d.textContent="Aceitar",d.classList.add("botao","aceitar"),d.onclick=()=>m(e,"Em andamento");const a=document.createElement("button");a.textContent="Recusar",a.classList.add("botao","recusar"),a.onclick=()=>m(e,"Recusado"),l.appendChild(d),l.appendChild(a),r.appendChild(l),o.appendChild(r)})});function m(t,o){const s=JSON.parse(localStorage.getItem("usuarioLogado"));let n=JSON.parse(localStorage.getItem("defesas"));Array.isArray(n)||(n=[]);let i=n.find(a=>a.aluno===t.aluno&&a.tema===t.tema);i?i.status=o:n.push({...t,status:o}),localStorage.setItem("defesas",JSON.stringify(n));let e,c;o==="Recusado"?(e="recusada",c="alerta"):(e="aceita",c="sucesso");const r=`Sua defesa sobre "${t.tema}" foi ${e} pelo orientador ${s.nome}.`;u(t.aluno,r,c),(JSON.parse(localStorage.getItem("usuarios"))||S).filter(a=>a.tipo==="coordenador").forEach(a=>{const p=`A defesa de ${t.aluno} sobre "${t.tema}" foi ${e} pelo orientador ${s.nome}.`;u(a.nome,p,c)}),alert("Status atualizado!"),location.reload()}

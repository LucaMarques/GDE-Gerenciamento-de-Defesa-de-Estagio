import{m as y}from"./main-DfM3t_-H.js";document.addEventListener("DOMContentLoaded",()=>{y();const m=document.querySelector(".btn-alterar-dados"),s=["matricula","curso","email","cpf","sexo","nascimento","telefone","endereco"],a=JSON.parse(localStorage.getItem("usuarioLogado"));a?(localStorage.setItem("nome",a.nome||""),localStorage.setItem("matricula",a.matricula||""),localStorage.setItem("email",a.email||""),localStorage.setItem("curso",a.curso||""),localStorage.setItem("cpf",a.cpf||""),localStorage.setItem("sexo",a.sexo||""),localStorage.setItem("nascimento",a.nascimento||""),localStorage.setItem("telefone",a.telefone||""),localStorage.setItem("endereco",a.endereco||"")):(alert("Você não está logado. Faça login!"),window.location.href="login.html"),document.querySelectorAll(".campo-valor").forEach(e=>e.textContent="");function d(){document.querySelectorAll(".campo-valor").forEach((n,c)=>{const r=localStorage.getItem(s[c]);r&&(n.textContent=r)})}d();const p=document.querySelector(".nome-perfil"),f=document.querySelector(".tipo-usuario");p.textContent=a.nome,f.textContent=a.tipo,m.addEventListener("click",()=>{document.querySelectorAll(".campo-valor").forEach((n,c)=>{const r=n.textContent;let o;if(s[c]==="sexo"){o=document.createElement("select"),o.className="input-edicao";const t=document.createElement("option");t.value="Masculino",t.textContent="Masculino";const l=document.createElement("option");l.value="Feminino",l.textContent="Feminino",o.appendChild(t),o.appendChild(l),o.value=r,Array.from(o.options).forEach(i=>{i.value===r&&(o.value=r)})}else o=document.createElement("input"),o.value=r,o.className="input-edicao";n.replaceWith(o)}),m.style.display="none",g()});function g(){const e=document.querySelector(".header-info-pessoais"),n=document.createElement("button");n.textContent="Salvar",n.className="btn-salvar-dados",n.onclick=v,e.appendChild(n)}function S(e){return/^\d{1,12}$/.test(e[0])?/^\d{2}\/\d{2}\/\d{4}$/.test(e[5])?/^\d{10,11}$/.test(e[6].replace(/\D/g,""))?e[7].trim().length<5?(alert("Endereço deve ter pelo menos 5 caracteres."),!1):e[4]!=="Masculino"&&e[4]!=="Feminino"?(alert("Selecione o sexo: Masculino ou Feminino."),!1):!0:(alert("Telefone deve conter apenas números (10 ou 11 dígitos)."),!1):(alert("Data de nascimento deve estar no formato DD/MM/AAAA."),!1):(alert("Matrícula deve conter até 12 números."),!1)}function u(e){return e=e.replace(/\D/g,""),e.length===11?`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7)}`:e.length===10?`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:e}function v(){const e=document.querySelectorAll(".input-edicao"),n=Array.from(e).map(t=>t.value);if(!S(n))return;e.forEach((t,l)=>{const i=document.createElement("span");i.className="campo-valor",s[l]==="telefone"?(i.textContent=u(t.value),localStorage.setItem(s[l],u(t.value))):(i.textContent=t.value,localStorage.setItem(s[l],t.value)),t.replaceWith(i)});let c=JSON.parse(localStorage.getItem("usuarioLogado"));s.forEach((t,l)=>{c[t]=n[l]}),localStorage.setItem("usuarioLogado",JSON.stringify(c));let r=JSON.parse(localStorage.getItem("usuarios"))||[];const o=r.findIndex(t=>t.nome===c.nome);o!==-1&&(r[o]=c,localStorage.setItem("usuarios",JSON.stringify(r))),document.querySelector(".btn-salvar-dados").remove(),m.style.display="inline-block"}});

import"./main-DbTm04-e.js";import{u as b}from"./usuarios-CQ51lQxe.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("login-container"),c=()=>e.classList.toggle("move");document.getElementById("open-register").addEventListener("click",c),document.getElementById("open-login").addEventListener("click",c),document.getElementById("open-register-mobile").addEventListener("click",c),document.getElementById("open-login-mobile").addEventListener("click",c);let r=JSON.parse(localStorage.getItem("usuarios"));(!r||r.length===0)&&(r=b),document.getElementById("matricula-cadastro").addEventListener("input",function(){this.value=this.value.replace(/\D/g,"")});const g=document.getElementById("nome-cadastro");g.addEventListener("input",function(){let t=this.value;t=t.replace(/[0-9]/g,""),t=t.replace(/\s{2,}/g," "),this.value=t}),g.addEventListener("blur",function(){let t=this.value.trim();t=t.replace(/\s+/g," "),t=t.replace(/\b\w/g,s=>s.toUpperCase()),this.value=t}),document.getElementById("btn-cadastro").addEventListener("click",()=>{const t=document.getElementById("tipo-usuario").value.trim(),s=document.getElementById("nome-cadastro").value.trim(),o=document.getElementById("matricula-cadastro").value.trim(),a=document.getElementById("email-cadastro").value.trim(),i=document.getElementById("senha-cadastro").value.trim(),n=document.getElementById("msg-cadastro-error");n.style.display="none",n.textContent="";const p=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(s===""||o===""||a===""||i===""||t===""){n.textContent="Preencha todos os campos!",n.style.display="block";return}if(!p.test(a)){n.textContent="Digite um email válido!",n.style.display="block";return}if(i.length<6){n.textContent="A senha deve ter 6 caracteres.",n.style.display="block";return}if(!/^\d+$/.test(o)){n.textContent="A matrícula deve ter apenas números!",n.style.display="block";return}if(r.find(I=>I.email===a)){n.textContent="Este email já está cadastrado!",n.style.display="block";return}const x={nome:s,matricula:o,email:a,senha:i,tipo:t,curso:"",cpf:"",sexo:"",nascimento:"",telefone:"",endereco:""};r.push(x),localStorage.setItem("usuarios",JSON.stringify(r)),alert("Cadastro realizado com sucesso!"),document.getElementById("form-cadastro").reset(),c()}),document.getElementById("btn-login").addEventListener("click",()=>{const t=document.getElementById("email-login").value.trim(),s=document.getElementById("senha-login").value.trim(),o=document.getElementById("msg-login-error");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){o.textContent="Digite um e-mail válido.",o.style.display="block";return}if(t===""||s===""){o.textContent="Preencha todos os campos.",o.style.display="block";return}const i=r.find(n=>n.email===t&&n.senha===s);i?(localStorage.setItem("usuarioLogado",JSON.stringify(i)),localStorage.setItem("tipoUsuario",i.tipo),alert(`Bem-vindo, ${i.nome} ! (${i.tipo})`),window.location.href="dashboard.html"):(o.textContent="Email ou senha incorretos.",o.style.display="block")});function y(t,s){const o=document.getElementById(t),a=document.getElementById(s);a.addEventListener("click",()=>{o.type==="password"?(o.type="text",a.classList.remove("bi-eye-slash"),a.classList.add("bi-eye")):(o.type="password",a.classList.remove("bi-eye"),a.classList.add("bi-eye-slash"))})}y("senha-login","toggle-login-senha"),y("senha-cadastro","toggle-cadastro-senha")});const u=document.getElementById("bg-cadastro"),l=u.getContext("2d");let d,m;function E(){d=u.width=window.innerWidth,m=u.height=window.innerHeight}window.addEventListener("resize",E);E();const v=[],h=["#0fa394","#17c7b5","#2A2F31","#d9d9d9","#E0E0E0"];function B(){const e=Math.random()>.5?"circle":"rect";return{x:Math.random()*d,y:Math.random()*m,vx:(Math.random()-.5)*1.2,vy:(Math.random()-.5)*1.2,size:10+Math.random()*30,color:h[Math.floor(Math.random()*h.length)],type:e,alpha:.5+Math.random()*.5}}for(let e=0;e<40;e++)v.push(B());function f(){l.clearRect(0,0,d,m),v.forEach(e=>{l.globalAlpha=e.alpha,l.fillStyle=e.color,e.type==="circle"?(l.beginPath(),l.arc(e.x,e.y,e.size,0,2*Math.PI),l.fill()):l.fillRect(e.x,e.y,e.size,e.size*.6),e.x+=e.vx,e.y+=e.vy,(e.x<-50||e.x>d+50)&&(e.vx*=-1),(e.y<-50||e.y>m+50)&&(e.vy*=-1)}),l.globalAlpha=1,requestAnimationFrame(f)}f();
